---
permalink: Caching-and-LoadBalancing
---
### 一致性Hashing算法
#### 什么是一致性hashing算法？
首先回顾下什么是**Hashing**，Hashing是一种将任意大小的数据映射到固定大小的另一数据（通常是整数）的技术，称为哈希或哈希码。

比如，编写了一些哈希函数以将任意字符串映射到0到50之间的某个数字。就是对50进行取模：

> hashcode = hash(Artists) % 50

> 24 = hash(Artists) % 50

> 42 = hash(Actor) % 50


“Artists”和“Actor”是两个通过哈希函数分别产生24和42哈希码的字符串。

这里的数字可以代表集群的数量，如果固定一个取模数字，会导致扩展性太差，比如我们现在有3台服务器,那么对请求的key进行hash，之后拿到的hashcode对3进行取模，得到的数字就是该key应该存储的服务器，
设想一下现在我们需要新添加一台机器，也就是机器数量来到了4，那么对4取模的结果和对3取模的结果基本上全部不一样，也就是说我们需要对所有的key进行一次重新的hash计算并重新存储。

一致性Hashing算法，就是解决这样的扩展性问题的，其本质也是hash取模，只是是永远的对2的32次方-1取模，在此基础上可以描述为：
* 它以某种虚拟环结构（称为hashing）的形式来表示资源请求。
* 服务器节点的位置的数量不固定，但环被认为具有无限数量的点，并且服务器节点可以放置在该环上的随机位置。当然，可以使用哈希函数再次选择此随机数，但是跳过了将其除以可用位置数的第二步，因为它不再是有限数。
* 与经典哈希方法中的密钥类似的请求（即用户，计算机或无服务器程序）也使用相同的哈希函数放置在同一环上。

[一致性Hash算法解释](https://zhuanlan.zhihu.com/p/34985026)

#### 实现一致性Hash算法

```java

```